C51 COMPILER V9.54   LCD1602                                                               06/20/2024 17:40:29 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN LCD1602.OBJ
COMPILER INVOKED BY: D:\Keil C51\C51\BIN\C51.EXE LCD1602.c OPTIMIZE(8,SPEED) DEBUG OBJECTEXTEND

line level    source

   1          #include"reg52.h"
   2          #include"LCD1602.h"
   3          void DelayN40us(unsigned int n)
   4          {
   5   1              unsigned int i;
   6   1              unsigned char j;            
   7   1              for(i=n;i>0;i--)
   8   1                      for(j=0;j<150;j++);          
   9   1      }
  10          void LCDInit(void)      
  11          {
  12   1              LCDWriteCommand(0x38);/*设置8位格式，2行，5x7*/
  13   1              LCDWriteCommand(0x38);/*设置8位格式，2行，5x7*/
  14   1              LCDWriteCommand(0x38);/*设置8位格式，2行，5x7，有的液晶做的不好，写三遍保险！！！！*/ 
  15   1              LCDWriteCommand(0x0c);/*整体显示，关光标，不闪烁*/ 
  16   1              LCDWriteCommand(0x06);/*设定输入方式，增量不移位*/
  17   1              LCDWriteCommand(0x01);/*清除屏幕显示*/    
  18   1              DelayN40us(100);          /*清屏延时*/ 
  19   1      }
  20          void LCDWriteCommand(unsigned char dat)
  21          {
  22   1              LCD_DB=dat;
  23   1              LCD_RS=0;/*选择写指令*/  
  24   1              LCD_RW=0;/*写入指令值*/  
  25   1              LCD_E=1; /*使能LCD1602*/         
  26   1              LCD_E=0;
  27   1              DelayN40us(1);/*写命令延时*/   
  28   1      }
  29          void LCDWriteData(unsigned char dat)      //写数据函数 
  30          {
  31   1              LCD_DB=dat;
  32   1              LCD_RS=1;/*选择写数据*/   
  33   1              LCD_RW=0;/*写入数据值*/   
  34   1              LCD_E=1; /*使能LCD1602*/  
  35   1              LCD_E=0;
  36   1              DelayN40us(1);/*写数据延时*/ 
  37   1      }
  38          
  39          void LCDDispChar(unsigned char x,unsigned char y,unsigned char dat)
  40          {
  41   1              unsigned char address;
  42   1              if(y==1)
  43   1                       address=0x80+x;         /*显示在第一排的时候的x的地址*/ 
  44   1              else
  45   1                       address=0xc0+x;         /*显示在第二排的时候的x的地址*/ 
  46   1              LCDWriteCommand(address);        /*输入地址*/ 
  47   1              LCDWriteData(dat);                       /*输入数据*/ 
  48   1      }
  49          
  50          void LCDDispNum(unsigned char x,unsigned char y,unsigned char dat)
  51          {
  52   1              unsigned char address;
  53   1              if(y==1)
  54   1                       address=0x80+x;         /*显示在第一排的时候的x的地址*/ 
  55   1              else
C51 COMPILER V9.54   LCD1602                                                               06/20/2024 17:40:29 PAGE 2   

  56   1                       address=0xc0+x;         /*显示在第二排的时候的x的地址*/ 
  57   1              LCDWriteCommand(address);        /*输入地址*/ 
  58   1              LCDWriteData(dat+48);            /*输入数据*/ 
  59   1      }
  60          void LCDDispString(unsigned char x,unsigned char y,unsigned char *string)
  61          {
  62   1              while(*string != 0)                /*没有检测到字符串结尾时*/
  63   1              {
  64   2                      LCDDispChar(x,y,*string++);/*逐个显示字符串*/
  65   2                      x++;                                       /*行地址加1*/
  66   2              }
  67   1      }
  68          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    189    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       5
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
