C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 1   


C51 COMPILER V9.54, COMPILATION OF MODULE YYH
OBJECT MODULE PLACED IN yyh.OBJ
COMPILER INVOKED BY: D:\Keil C51\C51\BIN\C51.EXE yyh.c OPTIMIZE(8,SPEED) DEBUG OBJECTEXTEND

line level    source

   1          //////////////////////////////////////////////
   2          //51µ¥Æ¬»úÒôÀÖ²¥·ÅÆ÷³ÌÐò                                        //
   3          //¹²Èý¸ö°´¼ü:ÉÏÒ»Çú¡¢ÏÂÒ»Çú¡¢²¥·Å\ÔÝÍ£          //
   4          //²¥·ÅÍêÒ»Ê×¸èÇúÎÞ°´¼ü°´ÏÂÊ±Ë³Ðò²¥·ÅÏÂÒ»Çú      //
   5          //////////////////////////////////////////////
   6          #include"reg52.h"
   7          #include"LCD1602.h"
   8          //#define sound_amount 5 //¸èÇúµÄÊýÁ¿
   9          sbit play_up=P1^3;         //ÉÏÒ»Ê×¸è
  10          sbit play_down=P3^5;   //ÏÂÒ»Ê×¸è
  11          sbit pause=P3^2;       //²¥·Å\ÔÝÍ£
  12          sbit power=P3^3;       //¿ª¹Ø»ú
  13          sbit speaker=P1^0;     //ÎÞÔ´·äÃùÆ÷
  14          //////////////////////////////////////////////
  15          unsigned char timer0h,timer0l,time;//timer0h,timer0lÎª¶¨Ê±Æ÷T0µÄ¸ßµÍÎ»³õÖµ,timeÎª¶ÔÓ¦µÄ½ÚÅÄÊ±¼ä
  16          unsigned char music_num;       //music_numÎª¸èÇú±àºÅ,music_num=0±íÊ¾¸Õ¿ª»úÊ±µÄ×´Ì¬,numÊÇ²éÕÒ¸èÇúÊý¾Ý±íµÄµØ
             -Ö·
  17          unsigned int num;
  18          unsigned int haomiao=0,miao=0;
  19          signed int fre;                   //¶ÔÓ¦ÆµÂÊÊý¾Ý±íµÄµØÖ·
  20          bit play_enable,power_enable=0;                   //¸èÇú²¥·ÅµÄÊ¹ÄÜ±êÖ¾Î»,ÓÃÓÚ²¥·Å\ÔÝÍ£
  21          void delay(unsigned char t);       //ÑÓÊ±×Óº¯Êý,¿ØÖÆ·¢ÒôµÄÊ±¼ä³¤¶È
  22          void delayms(unsigned int t);      //ÆÕÍ¨ÑÓÊ±×Ó³ÌÐò,¿ÉÓÃÓÚ°´¼üÏû¶¶
  23          void song(void);                           //ÑÝ×àÒ»¸öÒô·û
  24          void music_play(void);             //²¥·Å¸èÇú
  25          //////////////////////////////////////////////
  26          //Ã¿Èý¸öÊý×Ö,´ú±íÒ»¸öÒô·û
  27          //µÚÒ»¸öÊý×ÖÊÇÒô·ûµÄÊýÖµ1234567Ö®Ò»(µÚ¼¸¸öÒô),´ú±í¶ßÀ´ßä·¢...
  28          //µÚ¶þ¸öÊý×ÖÊÇ0123Ö®Ò»,´ú±íµÍÒô\ÖÐÒô\¸ßÒô\³¬¸ßÒô(µÚ¼¸¸ö°Ë¶È)
  29          //µÚÈý¸öÊý×ÖÊÇÊ±¼ä³¤¶È,ÒÔ°ëÅÄÎªµ¥Î»,ÀÖÇúÊý¾Ý±íµÄ½áÎ²ÊÇÈý¸ö0
  30          //////////////////////////////////////////////
  31          
  32          //¡¶ÑÌ»¨Ò×Àä¡·
  33          unsigned char code song1[]={
  34               5,2,1, 3,2,1, 2,2,2, 2,2,4, 3,2,1, 1,2,1, 2,2,1, 3,2,4, 
  35                   5,2,1, 3,2,1, 2,2,2, 2,2,2, 5,1,1, 3,2,1, 4,2,1, 3,2,4, 
  36                   3,2,1, 3,2,1, 7,2,1, 3,2,1, 2,2,2, 1,2,1, 7,1,1, 1,2,1, 
  37                   2,2,1, 3,2,1, 6,2,3, 6,1,1, 1,2,1, 3,2,1, 2,2,1, 6,1,1, 
  38                   1,2,1, 7,1,1, 5,1,1, 6,1,6, 5,2,1, 3,2,1, 2,2,2, 2,2,1, 
  39                   2,2,1, 3,2,1, 1,2,1, 2,2,1, 3,2,4, 5,2,1, 3,2,1, 2,2,2, 
  40                   2,2,1, 2,2,1, 5,1,1, 3,2,1, 4,2,1, 3,2,4, 3,2,1, 3,2,1, 
  41                   7,2,3, 3,2,1, 2,2,2, 1,2,1, 7,1,1, 1,2,1, 2,2,1, 3,2,1, 
  42                   6,2,3, 6,1,1, 1,2,1, 3,2,1, 2,2,1, 6,1,1, 1,2,1, 7,1,2, 
  43                   5,1,2, 6,1,6, 0,0,0 };
  44          
  45          //¡¶·¢ÈçÑ©¡·
  46          unsigned char code song2[]={
  47               5,1,1, 2,2,1, 3,2,2, 2,2,1, 3,2,1, 5,2,1, 6,2,1, 5,2,3, 1,2,1, 2,2,1, 
  48                   3,2,1, 6,2,1, 5,2,1, 3,2,1, 5,2,3, 5,2,1, 6,2,1, 1,3,2, 6,2,1, 5,2,1, 
  49                   3,2,1, 5,2,1, 3,2,2, 1,2,1, 2,2,1, 3,2,1, 1,2,1, 6,1,1, 3,2,1, 2,2,1, 
  50                   5,1,1, 2,2,1, 3,2,2, 2,2,1, 3,2,1, 5,2,1, 6,2,1, 5,2,3, 1,2,1, 2,2,1, 
  51                   3,2,1, 6,2,1, 5,2,3, 5,2,1, 6,2,1, 1,3,2, 6,2,1, 
  52                   5,2,1, 3,2,1, 5,2,1, 3,2,2, 1,2,1, 6,1,1, 3,2,1, 2,2,1, 1,2,1, 6,1,1, 
  53                   1,2,1, 2,2,1, 2,2,1, 1,2,4, 0,0,0 };
  54          
C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 2   

  55          //¡¶¼òµ¥°®¡·
  56          unsigned char code song3[]={
  57               5,1,1, 1,2,1, 2,2,1, 3,2,1, 2,2,1, 3,2,1, 4,2,1, 5,2,1, 5,2,1, 5,2,1, 
  58                   4,2,1, 3,2,1, 2,2,3, 5,1,1, 1,2,1, 2,2,1, 3,2,1, 4,2,1, 5,2,1, 5,2,1, 
  59                   5,2,1, 6,2,1, 5,2,2, 2,2,1, 3,2,1, 1,2,2, 1,2,1, 6,1,1, 2,2,1, 2,2,1, 
  60                   3,2,1, 3,2,1, 1,2,1, 5,2,1, 1,2,1, 5,2,1, 1,2,1, 7,1,1, 1,2,1, 1,2,1, 6,1,1, 
  61                   2,2,1, 2,2,1, 3,2,1, 3,2,1, 5,2,1, 5,2,1, 
  62                   5,2,1, 6,2,1, 5,2,2, 2,2,1, 3,2,1, 1,2,2,  
  63                   5,1,1, 1,2,1, 2,1,2, 3,2,1, 2,2,1, 3,2,1, 4,2,1, 5,2,1, 5,2,1, 5,2,1, 
  64                   4,2,1, 3,2,1, 2,2,3, 5,1,1, 1,2,1, 2,2,1, 3,2,1, 2,2,1, 3,2,1, 4,2,1, 
  65                   5,2,1, 5,2,1, 5,2,2, 2,2,1, 3,2,1, 1,2,2, 1,2,1, 6,1,1, 2,2,1, 2,2,1, 
  66                   3,2,1, 3,2,1, 1,2,2, 5,2,1, 1,2,1, 5,2,1, 5,2,1, 7,1,1, 1,2,1, 0,0,0 };
  67          
  68          //¡¶ÊÀÉÏÖ»ÓÐÂèÂèºÃ¡·
  69          unsigned char code song4[]={
  70               6,2,3, 5,2,1, 3,2,2, 5,2,2, 1,3,2, 6,2,1,
  71                   //6,2,3´ú±í6,ÖÐÒô,3¸ö°ëÅÄ;
  72                   //5,2,1´ú±í5,ÖÐÒô,1¸ö°ëÅÄ;
  73                   //3,2,2´ú±í3,ÖÐÒô,2¸ö°ëÅÄ;
  74                   //5,2,2´ú±í5,ÖÐÒô,2¸ö°ëÅÄ;
  75                   //1,3,2´ú±í1,¸ßÒô,2¸ö°ëÅÄ;
  76                   //...
  77               5,2,1,6,2,4, 3,2,2, 5,2,1, 6,2,1, 5,2,2, 3,2,2, 1,2,1,6,1,1, 5,2,1, 
  78                   3,2,1, 2,2,4, 2,2,3, 3,2,1, 5,2,2, 5,2,1, 6,2,1, 3,2,2, 2,2,2, 
  79                   1,2,4, 5,2,3, 3,2,1,2,2,1, 1,2,1, 6,1,1, 1,2,1, 5,1,6, 0,0,0};
  80          
  81          //¡¶µ±Äã¹Âµ¥Äã»áÏëÆðË­¡·
  82          unsigned char code song5[]={
  83               3,2,2, 3,2,1, 4,2,1, 3,2,2, 2,2,1, 1,2,1,  2,2,2, 5,2,2, 2,2,2, 2,2,3,
  84                   1,2,2, 1,2,1, 2,2,1, 1,2,2, 7,1,1, 6,1,1, 7,1,2, 3,2,2, 7,1,2, 7,1,3, 
  85                   6,1,2, 2,2,1, 3,2,1, 2,2,1, 1,2,1, 6,1,2, 5,1,2, 2,2,1, 3,2,1, 2,2,1, 
  86                   1,2,1, 6,1,2, 6,1,2, 2,2,1, 3,2,1, 2,2,1, 1,2,1, 6,1,1, 7,1,1, 1,2,6, 0,0,0 };
  87          
  88          //¡¶Ïç¼äÐ¡Â·¡·
  89          unsigned char code song6[]={
  90               3,1,2, 3,1,1, 3,1,1, 6,0,1, 6,0,1, 1,1,2,
  91               6,0,1, 5,0,1, 6,0,4, 6,0,2, 6,0,1 ,6,0,1, 6,0,2, 6,0,1, 1,1,1, 
  92               2,1,2, 2,1,1, 3,1,1, 2,1,4, 3,1,1, 3,1,1, 3,1,1, 2,1,1, 4,1,2,
  93               4,1,2, 3,1,2, 2,1,1, 1,1,1, 2,1,4, 7,0,1, 7,0,1, 7,0,1, 6,0,1, 
  94               5,0,1, 5,0,1, 6,0,1, 7,0,1, 7,0,1, 6,0,1, 5,0,1, 6,0,4, 6,1,2,
  95               3,1,1, 6,1,1, 7,1,1, 6,1,1, 5,1,1, 5,1,2, 5,1,1, 2,1,1, 5,1,1, 
  96               6,1,1, 5,1,1, 4,1,1, 4,1,2, 4,1,1, 3,1,1, 2,1,2, 1,1,1, 2,1,1, 
  97               3,1,1, 2,1,1, 1,1,1, 2,1,1, 3,1,4, 6,1,2, 3,1,1, 6,1,1, 7,1,1, 
  98                   6,1,1, 5,1,1, 5,1,2, 2,1,1, 5,1,1, 6,1,1, 5,1,1, 4,1,1, 0,0,0};     
  99          
 100          //¡¶ËÍ±ð¡·
 101          unsigned char code song7[]={
 102               5,1,2, 3,1,3, 5,1,1, 1,2,3, 6,1,2, 1,2,2, 
 103               5,1,4, 5,1,2, 1,1,1, 2,1,1, 3,1,2, 2,1,1, 1,1,1, 2,1,4, 5,1,2, 
 104                   3,1,1, 5,1,1, 1,2,2, 7,1,1, 6,1,2, 1,2,2, 5,1,4, 5,1,2, 2,1,1, 
 105                   3,1,1, 4,1,2, 7,0,1, 1,1,4, 6,1,2, 1,2,2, 1,2,4, 7,1,2, 6,1,1,
 106                   7,1,1, 1,2,4, 6,1,1, 7,1,1, 1,2,1, 6,1,1, 6,1,1, 5,1,1, 3,1,1, 
 107                   1,1,1, 2,1,8, 5,1,2, 3,1,1, 5,1,1, 1,2,2, 7,1,1, 6,1,2, 1,2,2, 
 108                   5,1,4, 5,1,2, 2,1,1, 3,1,1, 4,1,2, 7,0,2, 1,1,4, 0,0,0};
 109          
 110          //¡¶×îÀËÂþµÄÊÂ¡·
 111          unsigned char code song8[]={
 112               5,1,1, 6,1,1, 1,2,1, 6,1,2, 6,1,1, 5,1,1, 6,1,1, 5,1,1, 3,1,1, 5,1,5, 
 113                   5,1,1, 6,1,1, 1,2,1, 6,1,2, 6,1,1, 5,1,1, 6,1,1, 5,1,1, 6,1,1, 1,1,5, 
 114                   1,1,1, 2,1,1, 3,1,1, 2,1,1, 2,1,1, 2,1,1, 1,1,1, 2,1,1, 1,1,1, 6,1,1, 
 115                   3,1,2, 2,1,3, 5,1,1, 6,1,1, 1,2,1, 6,1,2, 6,1,1, 5,1,1, 6,1,1, 5,1,1, 
 116                   6,1,1, 1,1,5, 1,1,1, 2,1,1, 3,1,1, 4,1,2, 4,1,1, 5,1,1, 6,1,1, 6,1,1, 
C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 3   

 117                   5,1,1, 6,1,2, 1,2,1, 6,1,3, 1,2,1, 6,1,1, 5,1,1, 5,1,4, 1,1,1, 6,1,1, 
 118                   5,1,5, 5,1,1, 6,1,1, 1,2,1, 3,1,1, 2,1,1, 3,1,1, 1,1,6, 0,0,0}; 
 119          
 120          // ÆµÂÊ-°ëÖÜÆÚÊý¾Ý±í ¸ß°ËÎ»  ¹²±£´æÁËËÄ¸ö°Ë¶ÈµÄ28¸öÆµÂÊÊý¾Ý
 121          unsigned char code FREQH[]={
 122              0xF2, 0xF3, 0xF5, 0xF5, 0xF6, 0xF7, 0xF8,    //µÍÒô1234567
 123              0xF9, 0xF9, 0xFA, 0xFA, 0xFB, 0xFB, 0xFC, 0xFC,//1,2,3,4,5,6,7,i
 124              0xFC, 0xFD, 0xFD, 0xFD, 0xFD, 0xFE,            //¸ßÒô 234567
 125              0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFE, 0xFF};   //³¬¸ßÒô 1234567
 126          
 127          // ÆµÂÊ-°ëÖÜÆÚÊý¾Ý±í µÍ°ËÎ»
 128          unsigned char code FREQL[]={
 129              0x42, 0xC1, 0x17, 0xB6, 0xD0, 0xD1, 0xB6,    //µÍÒô1234567
 130              0x21, 0xE1, 0x8C, 0xD8, 0x68, 0xE9, 0x5B, 0x8F, //1,2,3,4,5,6,7,i
 131              0xEE, 0x44, 0x6B, 0xB4, 0xF4, 0x2D,             //¸ßÒô 234567
 132              0x47, 0x77, 0xA2, 0xB6, 0xDA, 0xFA, 0x16};   //³¬¸ßÒô 1234567  
 133          void KEY()
 134          {
 135   1              if(!pause)              //ÔÝÍ£¼ü´¦Àí
 136   1                      {
 137   2                      delayms(5);
 138   2                      if(!pause)
 139   2                      {
 140   3                              TR0=0;
 141   3                              
 142   3                              speaker=1;
 143   3                              if(music_num==0)    //music_num=0Ö»ÓÐÔÚ¸Õ¿ª»ú,ÇÒÎ´°´ÏÂÔÝÍ£¼üÊ±´æÔÚ,±íÊ¾¸Õ¿ª»úÊ±µÄ×´Ì¬,°´ÏÂºó´ÓµÚÒ»Ê×¿ªÊ
             -¼²¥·Å
 144   3                              {
 145   4                                      music_num=1;    //¸èÇúÐòºÅÖÃ1
 146   4                                      num=0;          //´ÓÍ·²¥·Å
 147   4                                      play_enable=1;  //ÔÊÐí²¥·Å
 148   4                              }
 149   3                              else
 150   3                              {
 151   4                                      play_enable=~play_enable;
 152   4                                  speaker=1;
 153   4                              }
 154   3                              while(!pause)    //Èô°´×ÅÔÝÍ£¼ü²»·ÅÊÖÊ±µÄ´¦Àí
 155   3                              {
 156   4                              if(play_enable==0){TR1  = 0;}           //Èç¹ûÊÇÔÝÍ££¬ÔòÏÔÊ¾Ê±¼ä²»±ä//£¨ÔÝÍ£Ê±play_enable==0£©
 157   4                              else 
 158   4                              {  
 159   5                                      TR1  = 1;
 160   5                                      LCDDispString(11,2,"00:");
 161   5                                      LCDDispString(0,2,"PLAY:");
 162   5      
 163   5                              }
 164   4                      
 165   4                              }
 166   3      
 167   3                        }//ÔÝÍ£¼ü´¦Àí½áÊø
 168   2              }//while½áÊø
 169   1      
 170   1                      if((!play_up)&&(music_num!=0)) //ÉÏÒ»Ê×°´¼ü
 171   1                      {
 172   2                      delayms(5);
 173   2                      if((!play_up)&&(music_num!=0))
 174   2                      {
 175   3                         TR0=0;
 176   3                         speaker=1;
 177   3                              music_num-=1;//¸èÇú±àºÅ¼õÒ»
C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 4   

 178   3                              if(music_num<=0)
 179   3                              music_num=5;
 180   3                              num=0;           //´ÓÍ·¿ªÊ¼²¥·Å
 181   3      
 182   3      
 183   3      /*                      if(music_num==(sound_amount+1))
 184   3                                      music_num=1;     */
 185   3                              delayms(500);//¸èÇúÇÐ»»Ê±ÑÓÊ±0.5S
 186   3                              miao=0;
 187   3                      } 
 188   2                      while(!play_up);        
 189   2                      }
 190   1      
 191   1                      if((!play_down)&&(music_num!=0))
 192   1                      {
 193   2                      delayms(5);
 194   2                      if((!play_down)&&(music_num!=0))
 195   2                      {   
 196   3                              TR0=0;
 197   3                              speaker=1;
 198   3                              music_num+=1;//¸èÇú±àºÅ¼ÓÒ»
 199   3                              if(music_num>=6)
 200   3                              music_num=1;
 201   3                              num=0;           //´ÓÍ·¿ªÊ¼²¥·Å
 202   3      
 203   3      
 204   3              /*              if(music_num==0)
 205   3                                      music_num=sound_amount;           */
 206   3                              delayms(500);//¸èÇúÇÐ»»Ê±ÑÓÊ±0.5S
 207   3                              miao=0;
 208   3                      }
 209   2                       while(!play_down); 
 210   2                      }
 211   1              if(!power)              //µçÔ´¼ü´¦Àí
 212   1                      {
 213   2                      delayms(5);
 214   2                      if(!power)
 215   2                      {
 216   3                              TR0=0;
 217   3                              
 218   3                              speaker=1;
 219   3      
 220   3                              power_enable=~power_enable;
 221   3                                              
 222   3                              while(!power)    //Èô°´×ÅÔÝÍ£¼ü²»·ÅÊÖÊ±µÄ´¦Àí
 223   3                              {
 224   4                                      if(power_enable==1)
 225   4                                              {
 226   5                                              LCDDispString(1,1,"WELCOME MUSIC");
 227   5                                              miao=0;
 228   5                                              }               
 229   4                                      else 
 230   4                                      {   TR1  = 0;
 231   5                                              LCDDispString(0,1,"                ");
 232   5                                              LCDDispString(0,2,"                ");
 233   5                                              music_num=1;    //¸èÇúÐòºÅÖÃ1
 234   5                                              num=0;          //´ÓÍ·²¥·Å
 235   5                                              play_enable=0;  //²»ÔÊÐí²¥·Å
 236   5              
 237   5                                      }
 238   4                      
 239   4                              }
C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 5   

 240   3      
 241   3                        }//ÔÝÍ£¼ü´¦Àí½áÊø
 242   2              }//while½áÊø
 243   1      
 244   1      
 245   1      }
 246          
 247          void main(void)
 248          {
 249   1              TMOD=0x11; //T0 T1 ¾ùÔÚ¹¤×÷·½Ê½1 
 250   1              TH1  = (65536-50000)/256;
 251   1              TL1  = (65536-50000)%256; 
 252   1              ET1  = 1;  
 253   1              ET0=1;  //T0¿ªÖÐ¶Ï              
 254   1              TR1  = 0;
 255   1              EA=1;   //CPU¿ªÖÐ¶Ï      
 256   1          LCDInit();
 257   1              
 258   1              while(1)
 259   1              {
 260   2                      music_play();   //¸ù¾Ýµ±Ç°×´Ì¬²¥·ÅÏàÓ¦¸èÇúµÄÄ³¸öÒô·û
 261   2      
 262   2      
 263   2                      KEY();
 264   2      
 265   2      
 266   2              }
 267   1      } 
 268          
 269          void delayms(unsigned int t)       //MSÑÓÊ±×Ó³ÌÐò
 270          {
 271   1              unsigned int i,j;
 272   1              for(i=0;i<t;i++)
 273   1              {
 274   2                      for(j=0;j<123;j++)
 275   2                              ;
 276   2              }
 277   1      }
 278          
 279          void delay(unsigned char t)         //ÑÓÊ±×Óº¯Êý,¿ØÖÆ·¢ÒôµÄÊ±¼ä³¤¶È,Ã¿¸ö½ÚÅÄ0.4S
 280          {
 281   1              unsigned char t1;
 282   1              unsigned long t2;
 283   1              for(t1=0;t1<t;t1++)            //Ç¶Ì×Ñ­»·, ¹²ÑÓÊ±t¸ö°ëÅÄ
 284   1              {
 285   2              for(t2=0;t2<6500;t2++) //ÑÓÊ±ÆÚ¼ä, ¿É½øÈëT0ÖÐ¶ÏÈ¥·¢Òô
 286   2              {
 287   3                      KEY();
 288   3              }
 289   2              }
 290   1              TR0=0;                         //¹Ø±ÕT0, Í£Ö¹·¢Òô
 291   1      }
 292          
 293          void timer0(void) interrupt 1  //T0ÖÐ¶Ï³ÌÐò,¿ØÖÆ·¢ÒôµÄÒôµ÷
 294          {
 295   1              speaker=!speaker;//Êä³ö·½²¨, ·¢Òô
 296   1              TH0=timer0h;     //ÏÂ´ÎµÄÖÐ¶ÏÊ±¼ä,Õâ¸öÊ±¼ä¿ØÖÆÒôµ÷¸ßµÍ
 297   1              TL0=timer0l;
 298   1       }
 299          void Timer1() interrupt 3
 300          {
 301   1              TH1  = (65536-50000)/256;
C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 6   

 302   1              TL1  = (65536-50000)%256; 
 303   1              haomiao++;
 304   1              {
 305   2                      if(haomiao==20)    //µ½Ò»ÃëÊ±¼ä£¬Ãë¼Ó1
 306   2                      {
 307   3                      haomiao=0;
 308   3                      miao++;
 309   3                      LCDDispNum(14,2,miao/10);
 310   3                      LCDDispNum(15,2,miao%10);
 311   3      
 312   3                      }
 313   2              }
 314   1      
 315   1      
 316   1      
 317   1      
 318   1      }
 319          void song(void)         //ÑÝ×àÒ»¸öÒô·û
 320          {
 321   1              TH0=timer0h;    //¿ØÖÆÒôµ÷
 322   1              TL0=timer0l;
 323   1              TR0=1;              //Æô¶¯T0, ÓÉT0Êä³ö·½²¨·¢Òô
 324   1              delay(time);    //Ã¿¸öÒô·ûµÄÑÝ×àÊ±¼ä
 325   1      }
 326          ////////////////////////////////////////////////////////////////////////////////////
 327          void music_play(void)//²¥·ÅÏàÓ¦¸èÇúµÄÄ³¸öÒô·û
 328          {
 329   1              if(((music_num==1)&&(play_enable==1))&&(power_enable==1))
 330   1              {
 331   2                      LCDDispNum(5,2,music_num);
 332   2                      fre=song1[num]+7*song1[num+1]-1;//µÚi¸öÊÇÒô·û,µÚi+1¸öÊÇµÚ¼¸¸ö°Ë¶È
 333   2                      timer0h=FREQH[fre];                 //´ÓÊý¾Ý±íÖÐ¶Á³öÆµÂÊÊýÖµ,Êµ¼ÊÉÏÊÇ¶¨Ê±µÄÊ±¼ä³¤¶È
 334   2              timer0l=FREQL[fre];
 335   2              time=song1[num+2];              //¶Á³öÊ±¼ä³¤¶ÈÊýÖµ
 336   2              num+=3;
 337   2                      if(fre<0)               //ÅÐ¶Ï¸èÇúµÄ½áÊøÎ»,½áÊøºó×ªµ½ÏÂÒ»Ê×
 338   2                      {
 339   3                              num=0;      //ÏÂÒ»Ê×´ÓÍ·²¥·Å
 340   3                              miao=0;
 341   3                              music_num=2;
 342   3              }
 343   2                      song();         //·¢³öÒ»¸öÒô·û
 344   2              }
 345   1      ////////////////////////////////////////////////////////////////////////////////////
 346   1              if(((music_num==2)&&(play_enable==1))&&(power_enable==1))
 347   1              {  
 348   2                      LCDDispNum(5,2,music_num);
 349   2                      fre=song2[num]+7*song2[num+1]-1;
 350   2                      timer0h=FREQH[fre];
 351   2              timer0l=FREQL[fre];
 352   2              time=song2[num+2];
 353   2              num+=3;
 354   2                      if(fre<0)
 355   2                      {
 356   3                              num=0;
 357   3                              miao=0;
 358   3                              music_num=3;
 359   3              }
 360   2                      song();         
 361   2              }
 362   1      ////////////////////////////////////////////////////////////////////////////////////
 363   1                      if(((music_num==3)&&(play_enable==1))&&(power_enable==1))
C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 7   

 364   1              {  
 365   2                      LCDDispNum(5,2,music_num);
 366   2                      fre=song3[num]+7*song3[num+1]-1;
 367   2                      timer0h=FREQH[fre];
 368   2              timer0l=FREQL[fre];
 369   2              time=song3[num+2];
 370   2              num+=3;
 371   2                      if(fre<0)
 372   2                      {
 373   3                              num=0;
 374   3                              miao=0;
 375   3                              music_num=4;
 376   3              }
 377   2                      song();         
 378   2              }
 379   1      ////////////////////////////////////////////////////////////////////////////////////
 380   1              if(((music_num==4)&&(play_enable==1))&&(power_enable==1))
 381   1              {
 382   2                      LCDDispNum(5,2,music_num);
 383   2                      fre=song4[num]+7*song4[num+1]-1;
 384   2                      timer0h=FREQH[fre];
 385   2              timer0l=FREQL[fre];
 386   2              time=song4[num+2];
 387   2              num+=3;
 388   2                      if(fre<0)
 389   2                      {
 390   3                              num=0;
 391   3                              miao=0;
 392   3                              music_num=5;
 393   3              }
 394   2                      song();         
 395   2              }
 396   1      ////////////////////////////////////////////////////////////////////////////////////
 397   1              if(((music_num==5)&&(play_enable==1))&&(power_enable==1))
 398   1              {
 399   2                      LCDDispNum(5,2,music_num);
 400   2                      fre=song5[num]+7*song5[num+1]-1;
 401   2                      timer0h=FREQH[fre];
 402   2              timer0l=FREQL[fre];
 403   2              time=song5[num+2];
 404   2              num+=3;
 405   2                      if(fre<0)
 406   2                      {
 407   3                              num=0;
 408   3                              miao=0;
 409   3                              music_num=1;
 410   3              }
 411   2                      song();         
 412   2              }
 413   1      
 414   1      ////////////////////////////////////////////////////////////////////////////////////
 415   1      }
 416          //³ÌÐò½áÊø
 417          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   1359    ----
   CONSTANT SIZE    =   1630    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     12       6
C51 COMPILER V9.54   YYH                                                                   06/20/2024 17:40:29 PAGE 8   

   IDATA SIZE       =   ----    ----
   BIT SIZE         =      2    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
